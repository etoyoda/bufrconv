# BUFRとは
BUFR とは、WMO（世界気象機関）がGTS（全球気象通信網）での国際データ交換に用いるために開発したデータ形式（通報式）のひとつです。
現在 WMO は通報式を GRIB と BUFR に集約する方針ですが、
格子データに特化したGRIBになじまないような時空間構造を持つデータ、
強いて今風に言うならば半構造データを表現するために、BUFR は用いられます。

BUFR は Binary Universal Form for the Representation of meteorological data
の略で、データ構造を問わないという意図を表現した名前です。

## BUFR の節構造

|節|長さ/オクテット|必須|説明|
|--|----------|----|----|
|0 |8         |必須|マジックナンバー "BUFR"、電文長、版番号|
|1 |17以上(3版), 22以上(4版)|必須|識別節 identification section|
|2 |可変|**任意**|任意節 optional section （実用例は知られない）|
|3 |可変|必須|資料記述節 data description section (データ構造記述)|
|4 |可変|必須|資料節 data section (データ本体)|
|5 |4   |必須|マジックナンバー "7777" |

BUFR に従うデータ表現は **BUFR 報 (BUFR message)** と呼ばれます。
データサンプルなどでは単独の BUFR 報（"BUFR" から "7777" まで一組）を
単独のファイルに保存することもありますが、たいていの実務においては
tar なり WMO バッチ FTP 形式なりなんらかの形式のファイルに多数の BUFR 報が
格納されます。

(なので、bufrscan.rb では特定のファイル形式を仮定せず、マジックナンバー
"BUFR" を探索して節構造を検証することで BUFR 報を漏れなく
探すようにしています。)

第0節の電文長と第1～4節の冒頭3オクテットは、ビッグエンディアンの整数値で
オクテット数を指示します。正当なBUFR報であれば、マジックナンバー "BUFR"
で位置を決めて第1節から順にオクテットを追って "7777" が見つかることを
確認できるはずです。



